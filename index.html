<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>E-Mongolia</title>
    <style>
        :root {
            --em-blue: #0066FF;
            --card-white: #fdfaf4;
            --label-blue: #0044CC;
        }

        body {
            font-family: -apple-system, system-ui, sans-serif;
            background-color: #f2f4f7;
            margin: 0; padding: 0;
            display: flex; flex-direction: column; align-items: center;
            overflow-x: hidden;
        }

        /* --- THE CARD --- */
        .card-perspective {
            width: 355px; height: 225px;
            margin-top: 35px;
            perspective: 1500px;
            cursor: pointer;
        }

        .card-inner {
            position: relative;
            width: 100%; height: 100%;
            transition: transform 0.7s;
            transform-style: preserve-3d;
        }

        .flipped { transform: rotateY(180deg); }

        .card-front, .card-back {
            position: absolute;
            width: 100%; height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 12px;
            background: var(--card-white);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            padding: 16px; box-sizing: border-box;
            overflow: hidden;
        }

        .card-back { transform: rotateY(180deg); display: flex; flex-direction: column; align-items: center; justify-content: space-between; }

        /* --- DESIGN ELEMENTS --- */
        .watermark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 170px; opacity: 0.05; z-index: 0; }
        .map-bg { position: absolute; bottom: 12px; right: 12px; width: 90px; opacity: 0.08; z-index: 0; }
        .vertical-mn { position: absolute; right: 12px; top: 40px; writing-mode: vertical-lr; font-size: 16px; color: rgba(0,0,0,0.08); font-weight: bold; letter-spacing: 3px; }

        /* --- DATA LAYOUT --- */
        .header { display: flex; align-items: center; gap: 8px; border-bottom: 0.5px solid #eee; padding-bottom: 6px; z-index: 1; }
        .header-text { font-size: 8.5px; font-weight: 800; line-height: 1.2; }
        
        .main-content { display: flex; gap: 12px; margin-top: 12px; z-index: 2; position: relative; }
        .photo-area { width: 100px; height: 132px; background: #ececec; border-radius: 4px; background-size: cover; background-position: center; border: 0.5px solid #ddd; flex-shrink: 0; }
        
        .info-col { flex: 1; display: flex; flex-direction: column; gap: 4px; }
        .lbl { color: var(--label-blue); font-size: 6.8px; font-weight: 700; text-transform: uppercase; }
        .lbl span { font-weight: 400; font-size: 5.5px; color: #666; }
        .val { color: #111; font-size: 10px; font-weight: 700; text-transform: uppercase; }
        
        .reg-line { color: #000 !important; font-size: 13px; font-weight: 900; margin-top: 4px; padding-top: 4px; border-top: 0.5px solid #eee; }

        /* --- OFFICIAL BUTTONS --- */
        .nav-row { display: flex; gap: 12px; width: 355px; margin-top: 30px; }
        .nav-card { 
            flex: 1; background: white; border-radius: 12px; padding: 20px 10px;
            display: flex; flex-direction: column; align-items: center; gap: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04); border: none;
        }
        .nav-card .icon-box { width: 24px; height: 24px; border: 2px solid var(--em-blue); border-radius: 5px; position: relative; }
        .nav-card .icon-box::after { content: ''; position: absolute; top: 4px; left: 4px; width: 12px; height: 2px; background: var(--em-blue); box-shadow: 0 4px 0 var(--em-blue), 0 8px 0 var(--em-blue); }
        .nav-card span { font-size: 13px; font-weight: 600; color: #333; }

        /* --- SETTINGS (SLIDE UP) --- */
        #formOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); display: none; z-index: 1000; }
        #formContent { position: absolute; bottom: 0; width: 100%; background: white; border-radius: 24px 24px 0 0; padding: 25px; box-sizing: border-box; }
        .hide-trigger { margin-top: 60px; border: none; background: none; color: #ccc; font-size: 11px; width: 100%; }

        input, select { width: 100%; padding: 14px; margin: 8px 0; border: 1px solid #eee; border-radius: 10px; font-size: 15px; }
        .save-btn { width: 100%; padding: 18px; background: var(--em-blue); color: white; border: none; border-radius: 12px; font-weight: bold; margin-top: 15px; font-size: 16px; }
    </style>
</head>
<body>

    <div class="card-perspective" onclick="flipIt()">
        <div class="card-inner" id="cardElement">
            
            <div class="card-front">
                <img src="https://upload.wikimedia.org/wikipedia/commons/a/af/Soyombo_symbol.svg" class="watermark">
                <img src="https://upload.wikimedia.org/wikipedia/commons/e/ea/Map_of_Mongolia.svg" class="map-bg">
                <div class="vertical-mn">ᠮᠣᠩᠭᠣᠯ ᠤᠯᠤᠰ</div>
                <div class="header">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Flag_of_Mongolia.svg/2560px-Flag_of_Mongolia.svg.png" width="30">
                    <div class="header-text">МОНГОЛ УЛСЫН ИРГЭНИЙ ҮНЭМЛЭХ<br>CITIZEN IDENTITY CARD OF MONGOLIA</div>
                </div>
                <div class="main-content">
                    <div class="photo-area" id="p_out"></div>
                    <div class="info-col">
                        <div class="lbl">Овог <span>/ FAMILY NAME</span></div><div class="val" id="f_out">---</div>
                        <div class="lbl">Эцэг/эх-ийн нэр <span>/ SURNAME</span></div><div class="val" id="s_out">---</div>
                        <div class="lbl">Нэр <span>/ GIVEN NAME</span></div><div class="val" id="g_out">---</div>
                        <div style="display:flex; gap: 20px;">
                            <div><div class="lbl">Хүйс <span>/ SEX</span></div><div class="val" id="sx_out">---</div></div>
                            <div><div class="lbl">Төрсөн огноо <span>/ BIRTH DATE</span></div><div class="val" id="b_out">---</div></div>
                        </div>
                        <div class="lbl">БҮРТГЭЛИЙН ДУГААР</div><div class="val reg-line" id="r_out">000000000000</div>
                    </div>
                </div>
            </div>

            <div class="card-back">
                <div class="header-text" style="font-size: 10px; text-align: center; border-bottom: 1px solid #eee; width: 100%; padding-bottom: 5px;">УЛСЫН БҮРТГЭЛИЙН ЕРӨНХИЙ ГАЗАР</div>
                <img src="https://upload.wikimedia.org/wikipedia/commons/a/af/Soyombo_symbol.svg" width="55" style="filter: invert(24%) sepia(91%) saturate(3000%) hue-rotate(210deg);">
                <div style="display:flex; width: 100%; justify-content: space-around; text-align: center;">
                    <div><div class="lbl">Олгосон <span>/ ISSUED</span></div><div class="val" id="i_out">---</div></div>
                    <div><div class="lbl">Хүчинтэй <span>/ EXPIRY</span></div><div class="val" id="e_out">---</div></div>
                </div>
            </div>
        </div>
    </div>

    <div class="nav-row">
        <div class="nav-card">
            <div class="icon-box"></div>
            <span>Лавлах</span>
        </div>
        <div class="nav-card">
            <div style="width:24px; height:24px; border: 2px solid var(--em-blue); border-radius: 50%; position:relative;">
                <div style="position:absolute; top:4px; left:9px; width:2px; height:12px; background:var(--em-blue); transform:rotate(45deg);"></div>
            </div>
            <span>Дахин захиалах</span>
        </div>
    </div>

    <button class="hide-trigger" onclick="openForm()">Service Engine v7.0.1</button>

    <div id="formOverlay" onclick="closeForm(event)">
        <div id="formContent">
            <h3 style="margin:0 0 15px 0">Identity Card Setup</h3>
            <label style="font-size:12px">Upload Portrait:</label>
            <input type="file" accept="image/*" onchange="upPic(event)">
            <input type="text" id="f_in" placeholder="Овог (Family Name)">
            <input type="text" id="s_in" placeholder="Эцэг/эх-ийн нэр (Surname)">
            <input type="text" id="g_in" placeholder="Нэр (Given Name)">
            <select id="sx_in"><option value="ЭР / MALE">ЭР / MALE</option><option value="ЭМ / FEMALE">ЭМ / FEMALE</option></select>
            <input type="text" id="b_in" placeholder="Төрсөн огноо (YYYY.MM.DD)">
            <input type="text" id="r_in" placeholder="Бүртгэлийн дугаар (Civil ID)">
            <input type="text" id="i_in" placeholder="Олгосон огноо">
            <input type="text" id="e_in" placeholder="Хүчинтэй хугацаа">
            <button class="save-btn" onclick="save()">SAVE TO SYSTEM</button>
        </div>
    </div>

    <script>
        function flipIt() { document.getElementById('cardElement').classList.toggle('flipped'); }
        function openForm() { document.getElementById('formOverlay').style.display = 'block'; }
        function closeForm(e) { if(e.target.id === 'formOverlay') e.target.style.display = 'none'; }

        function upPic(e) {
            const r = new FileReader();
            r.onload = () => {
                document.getElementById('p_out').style.backgroundImage = `url(${r.result})`;
                localStorage.setItem('em_p', r.result);
            };
            r.readAsDataURL(e.target.files[0]);
        }

        function save() {
            const d = {
                f: document.getElementById('f_in').value,
                s: document.getElementById('s_in').value,
                g: document.getElementById('g_in').value,
                sx: document.getElementById('sx_in').value,
                b: document.getElementById('b_in').value,
                r: document.getElementById('r_in').value,
                i: document.getElementById('i_in').value,
                e: document.getElementById('e_in').value
            };
            localStorage.setItem('em_v7', JSON.stringify(d));
            render(d);
            document.getElementById('formOverlay').style.display = 'none';
        }

        function render(d) {
            document.getElementById('f_out').innerText = d.f || '---';
            document.getElementById('s_out').innerText = d.s || '---';
            document.getElementById('g_out').innerText = d.g || '---';
            document.getElementById('sx_out').innerText = d.sx || '---';
            document.getElementById('b_out').innerText = d.b || '---';
            document.getElementById('r_out').innerText = d.r || '000000000000';
            document.getElementById('i_out').innerText = d.i || '---';
            document.getElementById('e_out').innerText = d.e || '---';
        }

        window.onload = () => {
            const sd = JSON.parse(localStorage.getItem('em_v7'));
            const sp = localStorage.getItem('em_p');
            if (sp) document.getElementById('p_out').style.backgroundImage = `url(${sp})`;
            if (sd) {
                render(sd);
                document.getElementById('f_in').value = sd.f; document.getElementById('s_in').value = sd.s;
                document.getElementById('g_in').value = sd.g; document.getElementById('sx_in').value = sd.sx;
                document.getElementById('b_in').value = sd.b; document.getElementById('r_in').value = sd.r;
                document.getElementById('i_in').value = sd.i; document.getElementById('e_in').value = sd.e;
            }
        };
    </script>
</body>
</html>